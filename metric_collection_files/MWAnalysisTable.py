'''
    Section: Memory Workload Analysis Tables
    ---------------------------------------------------------------------- --------------- ------------------------------
    dram__bytes_read.sum                                                             Kbyte                           2,59
    dram__bytes_read.sum.pct_of_peak_sustained_elapsed                                   %                           0,07
    dram__bytes_read.sum.per_second                                           Gbyte/second                           1,42
    dram__bytes_write.sum                                                            Kbyte                              8
    dram__bytes_write.sum.pct_of_peak_sustained_elapsed                                  %                           0,21
    dram__bytes_write.sum.per_second                                          Gbyte/second                           4,39
    dram__sectors_read.sum                                                          sector                             81
    dram__sectors_write.sum                                                         sector                            250
    l1tex__lsu_writeback_active_mem_lg.sum                                           cycle                              0
    l1tex__lsu_writeback_active_mem_lg.sum.pct_of_peak_sustained_active                  %                              0
    l1tex__t_output_wavefronts_pipe_lsu_mem_global_op_atom.sum.pct_of_peak               %                              0
    _sustained_active                                                                                                    
    l1tex__t_output_wavefronts_pipe_lsu_mem_global_op_ld.sum.pct_of_peak_s               %                              0
    ustained_active                                                                                                      
    l1tex__t_output_wavefronts_pipe_lsu_mem_global_op_red.sum.pct_of_peak_               %                              0
    sustained_active                                                                                                     
    l1tex__t_output_wavefronts_pipe_lsu_mem_global_op_st.sum.pct_of_peak_s               %                           0,14
    ustained_active                                                                                                      
    l1tex__t_output_wavefronts_pipe_lsu_mem_local_op_ld.sum.pct_of_peak_su               %                              0
    stained_active                                                                                                       
    l1tex__t_output_wavefronts_pipe_lsu_mem_local_op_st.sum.pct_of_peak_su               %                              0
    stained_active                                                                                                       
    l1tex__t_output_wavefronts_pipe_tex_mem_surface_op_atom.sum.pct_of_pea               %                              0
    k_sustained_active                                                                                                   
    l1tex__t_output_wavefronts_pipe_tex_mem_surface_op_ld.sum.pct_of_peak_               %                              0
    sustained_active                                                                                                     
    l1tex__t_output_wavefronts_pipe_tex_mem_surface_op_red.sum.pct_of_peak               %                              0
    _sustained_active                                                                                                    
    l1tex__t_output_wavefronts_pipe_tex_mem_surface_op_st.sum.pct_of_peak_               %                              0
    sustained_active                                                                                                     
    l1tex__t_output_wavefronts_pipe_tex_mem_texture.sum.pct_of_peak_sustai               %                              0
    ned_active                                                                                                           
    l1tex__t_requests_pipe_lsu_mem_global_op_atom.sum                              request                              0
    l1tex__t_requests_pipe_lsu_mem_global_op_ld.sum                                request                              0
    l1tex__t_requests_pipe_lsu_mem_global_op_red.sum                               request                              0
    l1tex__t_requests_pipe_lsu_mem_global_op_st.sum                                request                              1
    l1tex__t_requests_pipe_lsu_mem_local_op_ld.sum                                 request                              0
    l1tex__t_requests_pipe_lsu_mem_local_op_st.sum                                 request                              0
    l1tex__t_requests_pipe_tex_mem_surface_op_atom.sum                             request                              0
    l1tex__t_requests_pipe_tex_mem_surface_op_ld.sum                               request                              0
    l1tex__t_requests_pipe_tex_mem_surface_op_red.sum                              request                              0
    l1tex__t_requests_pipe_tex_mem_surface_op_st.sum                               request                              0
    l1tex__t_requests_pipe_tex_mem_texture.sum                                     request                              0

    l1tex__t_sector_pipe_lsu_mem_global_op_atom_hit_rate.pct                             %                              0
    l1tex__t_sector_pipe_lsu_mem_global_op_ld_hit_rate.pct                               %                              0
    l1tex__t_sector_pipe_lsu_mem_global_op_red_hit_rate.pct                              %                              0
    l1tex__t_sector_pipe_lsu_mem_global_op_st_hit_rate.pct                               %                              0
    l1tex__t_sector_pipe_lsu_mem_local_op_ld_hit_rate.pct                                %                              0
    l1tex__t_sector_pipe_lsu_mem_local_op_st_hit_rate.pct                                %                              0
    l1tex__t_sector_pipe_tex_mem_surface_op_atom_hit_rate.pct                            %                              0
    l1tex__t_sector_pipe_tex_mem_surface_op_ld_hit_rate.pct                              %                              0
    l1tex__t_sector_pipe_tex_mem_surface_op_red_hit_rate.pct                             %                              0
    l1tex__t_sector_pipe_tex_mem_surface_op_st_hit_rate.pct                              %                              0
    l1tex__t_sector_pipe_tex_mem_texture_op_tex_hit_rate.pct                             %                              0

    l1tex__tex_writeback_active.sum                                                  cycle                              0
    l1tex__tex_writeback_active.sum.pct_of_peak_sustained_active                         %                              0
    sass__inst_executed_global_loads                                                  inst                              0
    sass__inst_executed_global_stores                                                 inst                              1
    sass__inst_executed_local_loads                                                   inst                              0
    sass__inst_executed_local_stores                                                  inst                              0
    smsp__inst_executed_op_generic_atom_dot_alu.sum                                   inst                              0
    smsp__inst_executed_op_generic_atom_dot_cas.sum                                   inst                              0
    smsp__inst_executed_op_global_red.sum                                             inst                              0
    smsp__inst_executed_op_surface_atom_dot_alu.sum                                   inst                              0
    smsp__inst_executed_op_surface_atom_dot_cas.sum                                   inst                              0
    smsp__inst_executed_op_surface_ld.sum                                             inst                              0
    smsp__inst_executed_op_surface_red.sum                                            inst                              0
    smsp__inst_executed_op_surface_st.sum                                             inst                              0
    smsp__inst_executed_op_texture.sum                                                inst                              0
    lts__t_requests.sum                                                            request                             38
    lts__t_requests_srcunit_tex.sum                                                request                              1
    lts__t_requests_srcunit_tex_op_atom_dot_alu.sum                                request                              0
    lts__t_requests_srcunit_tex_op_atom_dot_cas.sum                                request                              0
    lts__t_requests_srcunit_tex_op_read.sum                                        request                              0
    lts__t_requests_srcunit_tex_op_red.sum                                         request                              0
    lts__t_requests_srcunit_tex_op_write.sum                                       request                              1
    sass__inst_executed_shared_loads                                                  inst                              0
    sass__inst_executed_shared_stores                                                 inst                              0
    smsp__inst_executed_op_shared_atom.sum                                            inst                              0
    ---------------------------------------------------------------------- --------------- ------------------------------
'''

MWATableMetrics = ["dram__bytes_read.sum ", "dram__bytes_write.sum ", 
"l1tex__t_output_wavefronts_pipe_lsu_mem_global_op_atom", "l1tex__t_output_wavefronts_pipe_lsu_mem_global_op_ld", 
"l1tex__t_output_wavefronts_pipe_lsu_mem_global_op_red", "l1tex__t_output_wavefronts_pipe_lsu_mem_global_op_st", 
"l1tex__t_output_wavefronts_pipe_lsu_mem_local_op_ld", "l1tex__t_output_wavefronts_pipe_lsu_mem_local_op_st", 
"l1tex__t_output_wavefronts_pipe_tex_mem_surface_op_atom", "l1tex__t_output_wavefronts_pipe_tex_mem_surface_op_ld", 
"l1tex__t_output_wavefronts_pipe_tex_mem_surface_op_red", "l1tex__t_output_wavefronts_pipe_tex_mem_surface_op_st", 
"l1tex__t_output_wavefronts_pipe_tex_mem_texture",

"l1tex__t_requests_pipe_lsu_mem_global_op_atom.sum ", "l1tex__t_requests_pipe_lsu_mem_global_op_ld.sum ", 
"l1tex__t_requests_pipe_lsu_mem_global_op_red.sum ", "l1tex__t_requests_pipe_lsu_mem_global_op_st.sum ",
"l1tex__t_requests_pipe_lsu_mem_local_op_ld.sum ", "l1tex__t_requests_pipe_lsu_mem_local_op_st.sum ",
"l1tex__t_requests_pipe_tex_mem_surface_op_atom.sum ", "l1tex__t_requests_pipe_tex_mem_surface_op_ld.sum ",
"l1tex__t_requests_pipe_tex_mem_surface_op_red.sum ", "l1tex__t_requests_pipe_tex_mem_surface_op_st.sum ", 
"l1tex__t_requests_pipe_tex_mem_texture.sum ",

"l1tex__t_sector_pipe_lsu_mem_global_op_atom_hit_rate", "l1tex__t_sector_pipe_lsu_mem_global_op_ld_hit_rate", 
"l1tex__t_sector_pipe_lsu_mem_global_op_red_hit_rate", "l1tex__t_sector_pipe_lsu_mem_global_op_st_hit_rate", 
"l1tex__t_sector_pipe_lsu_mem_local_op_ld_hit_rate", "l1tex__t_sector_pipe_lsu_mem_local_op_st_hit_rate", 
"l1tex__t_sector_pipe_tex_mem_surface_op_atom_hit_rate", "l1tex__t_sector_pipe_tex_mem_surface_op_ld_hit_rate", 
"l1tex__t_sector_pipe_tex_mem_surface_op_red_hit_rate", "l1tex__t_sector_pipe_tex_mem_surface_op_st_hit_rate", 
"l1tex__t_sector_pipe_tex_mem_texture_op_tex_hit_rate",

"sass__inst_executed_global_loads", "sass__inst_executed_global_stores", "sass__inst_executed_local_loads", "sass__inst_executed_local_stores", 
"lts__t_requests"]

def collect_MWAnalysisTable(metrics):
  # print("Collect Memory Workload Analysis Table Metrics")
  mwatable = {}
  for i in metrics:
    for j in MWATableMetrics:
      if j in i:
        offset = len("    ---------------------------------------------------------------------- --------------- -")
        val = ''
        counter = 0
        string = i[offset:len(i)-1]
        while True:
          if counter == len(string):
            break
          if string[counter] != '.' and string[counter] != ',' and string[counter] != ' ':
            val += string[counter]
          if string[counter] == ',':
            val += '.'
          counter += 1
        if ' Gbyte' in i:
          val += ' Gbyte'
        elif ' Mbyte' in i:
          val += ' Mbyte'
        elif ' Kbyte' in i:   
          val += ' Kbyte'
        elif ' Byte' in i:
          val += ' Byte'
        elif ' byte' in i:
          val += ' Byte'
        mwatable[j] = val

#  print(mwatable)
#  print('\n')

  return mwatable 
